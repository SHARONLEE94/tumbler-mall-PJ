<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.tumblermall.board.mapper.BoardMapper">

    <resultMap id="boardList" type="com.tumblermall.board.dto.BoardMainDto">
        <result property="boardType" column="board_type_code"></result>
        <result property="postTitle" column="post_title"></result>
        <result property="postWriter" column="writer_id"></result>
        <result property="writeAt" column="post_write_history"></result>
        <result property="viewCount" column="view_count"></result>
    </resultMap>

    <select id="practice" resultType="String" parameterType="String">
        select board_type_code, post_title, writer_id
        from modeling.post
        where post_id = #{toser}
    </select>

    <select id="boardMain" parameterType="String" resultMap="boardList">
        select p.board_type_code, p.post_title, p.writer_id, p.view_count, ph.post_write_history
        from modeling.post p
                 join modeling.post_history ph
                      on p.post_id = ph.post_id
        where ph.post_history_type_id = 1
        order by ph.post_write_history desc
    </select>

</mapper>